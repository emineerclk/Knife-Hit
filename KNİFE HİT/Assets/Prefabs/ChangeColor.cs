using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class ChangeColor : MonoBehaviour
{
    public static ChangeColor Instance;

    [SerializeField] GameObject knifeIcon;

    //a=active
    //b=not active;
    [SerializeField] private Color aColor;
    [SerializeField] private Color bColor;

    private int childTurn = 0;
    private int knifeCount = 0;

    private void Awake()
    {
        Instance = this;
    }

    private void Start()
    {
        knifeCount = LevelContoller.Instance.GetknifeNumber();
        SetInitialKnifeColors();
    }

    public void ChangeKnifeColor()
    {
        // Tüm bıçakların rengi değiştirildiyse, tekrar renkleri başlangıç renklerine döndür ve çocuk objelerin spriterendererlerini kapat.
        if (childTurn >= knifeCount)
        {
            SetInitialKnifeColors();
            CloseRemainingKnifeSprites();
            childTurn = 0;
            return;
        }

        // Sadece bir bıçağın rengini değiştir.
        transform.GetChild(childTurn).GetComponent<SpriteRenderer>().color = bColor;
        childTurn++;
    }

    private void SetInitialKnifeColors()
    {
        // Tüm bıçakların rengini başlangıç renklerine döndür.
        for (int i = 0; i < transform.childCount; i++)
        {
            transform.GetChild(i).GetComponent<SpriteRenderer>().color = bColor;
        }
    }

    public void SetInitialKnifeColors(int num)
    {
        // Tüm bıçakların rengini başlangıç renklerine döndür.
        for (int i = 0; i < transform.childCount; i++)
        {
            transform.GetChild(i).GetComponent<SpriteRenderer>().color = bColor;
        }
    }

    private void CloseRemainingKnifeSprites()
    {
        // Kalan bıçakların spriterendererlerini kapat.
        for (int i = knifeCount; i < transform.childCount; i++)
        {
            transform.GetChild(i).GetComponent<SpriteRenderer>().enabled = false;
        }
    }
}
























































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































